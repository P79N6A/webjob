<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>sources</title>
<link rel="stylesheet" href="selectPage.css">
</head>
<body>
    <div id="sourceChangeBox">
        <span>请选择来源：</span>
        <div id="sourceChangeDiv">
            <ul>
                <li data-value="0">市场部下单</li>
                <li data-value="1">内部立项</li>
            </ul>
        </div>
        <div class="btnBox">
            <span class="reverse">反选</span>
            <span class="cancle">取消已选</span>
        </div>
    </div>    
    <input type="hidden" id="hidden">
    <script type="text/javascript" src="../../js/jquery-2.1.4.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            var str=""; 
            $("li").click(function(){
                $(this).toggleClass('selected');
                setHiddenVal();
            });
            $(".reverse").click(function(){
                $("li").toggleClass('selected');
                setHiddenVal();
            });
            $(".cancle").click(function(){
                $("li").removeClass('selected');
                setHiddenVal();
            });
            str="";
            str=$(window.parent.document).find("#contents").contents().find("#sources").val();
            if(str!=undefined){
            	str=str.split(",");
            	for(var i=0;i<str.length;i++){
                	$("li[data-value='"+str[i]+"']").addClass('selected');
            	}
            	$("#hidden").val(str);
            }
            
            str="";
            function setHiddenVal(){
                $("li").filter(".selected").each(function(){
                    str+= $(this).attr("data-value")+",";
                });
                $("#hidden").val(str);
                str="";
            }
        });
    </script>
</body>
</html>